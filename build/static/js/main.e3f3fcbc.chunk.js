(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{199:function(e,t,a){e.exports=a(409)},204:function(e,t,a){},266:function(e,t,a){},351:function(e,t,a){},406:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"addNumber",function(){return x}),a.d(n,"reduceNumber",function(){return T}),a.d(n,"addTask",function(){return L}),a.d(n,"getTask",function(){return P}),a.d(n,"deleteItem",function(){return D}),a.d(n,"editItem",function(){return A});var o=a(1),i=a.n(o),s=a(7),c=a.n(s),r=(a(204),a(23)),l=a(24),m=a(26),u=a(25),d=a(27),h=a(57),g=a(195),f=a(97),p=a(413),v=a(28),b=a(412),E=a(410),C=a(416),N=a(415),O="ADD_NUMBER",I="REDUCE_NUMBER",k="GET_TASL",w=a(99),y=a.n(w),j=a(414);function U(e){if(document.cookie.length>0){var t=document.cookie.indexOf("".concat(e,"="));if(-1!==t){t=t+e.length+1;var a=document.cookie.indexOf(";",t);return-1===a&&(a=document.cookie.length),unescape(document.cookie.substring(t,a))}}return""}var M="http://127.0.0.1:5000",S={get:function(e,t){return new Promise(function(a,n){y.a.get(M+e,{headers:{token:U("TOKEN")},params:t}).then(function(e){if(200===e.status)switch(e.data.status){case 0:a(e.data);break;case 2:j.a.error("\u672a\u767b\u5f55"),setTimeout(function(){window.location.href="/login"},2e3)}}).catch(function(e){return a(e)})})},loginPost:function(e,t){return new Promise(function(a,n){y.a.post(M+e,t).then(function(e){200===e.status&&a(e.data)}).catch(function(e){return a(e)})})},post:function(e,t){return new Promise(function(a,n){y.a.post(M+e,t,{headers:{token:U("TOKEN")}}).then(function(e){if(200===e.status)switch(e.data.status){case 0:a(e.data);break;case 2:j.a.error("\u672a\u767b\u5f55"),setTimeout(function(){window.location.href="/login"},2e3)}}).catch(function(e){return a(e)})})}},V=function(e){for(var t in e)""===e[t]&&delete e[t];return e};function x(){return{type:O,payload:""}}function T(){return{type:I,payload:""}}function L(e,t){var a={task:e,image:t};return function(e){S.post("/test",a).then(function(t){0===t.status&&e(P(""))})}}function P(e){var t={task:e};return function(e){S.get("/test",t).then(function(t){0===t.status&&e({type:k,payload:t.data})})}}function D(e){var t={id:e};return function(e){S.post("/test/delete",t).then(function(t){0===t.status&&e(P(""))})}}function A(e,t,a){var n={id:e,task:t,image:a};return function(e){S.post("/test/edit",V(n)).then(function(t){0===t.status&&e(P(""))})}}a(266);var K=function(e){return o.createElement("div",{className:"image-content ".concat(e.chooseImageUrl===e.data.url?"image-content-active":null),onClick:e.chooseImage},o.createElement("div",{className:"image-box"},o.createElement("img",{className:"box-image",src:e.data.url})),o.createElement("div",{className:"image-text"},e.data.name))},B=a(9),R=a(411),_=a(184),G=new(a.n(_).a)({region:"oss-ap-southeast-1",accessKeyId:"LTAIEVSSmwrMsEkn",accessKeySecret:"ZGHUz0XVhoWjK6KQ7JgALmBLtV5SSo",bucket:"ts-img"}),J=function(e){return new Promise(function(t,a){G.put(e.name,e).then(function(e){t(e)}).catch(function(e){a(e)})})},W=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).uploadOnChange=function(e){},a.beforeUpload=function(e){if("image/jpeg"===e.type||"image/png"===e.type){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){J(e).then(function(e){e.res.status&&a.props.getImagesList()})}}else j.a.error("You can only upload JPG/PNG file!");return!1},a.state={loading:!1,imageUrl:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.imageUrl,t=o.createElement("div",null,o.createElement(B.a,{type:this.state.loading?"loading":"plus"}),o.createElement("div",{className:"ant-upload-text"},"Upload"));return o.createElement(R.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:this.beforeUpload,onChange:this.uploadOnChange},e?o.createElement("img",{src:e,alt:"avatar"}):t)}}]),t}(o.Component),X=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getImagesList=function(){S.get("/test/getImagesList").then(function(e){0===e.status&&a.setState({imageList:e.list})})},a.chooseImage=function(e){a.setState({chooseImageUrl:e.url})},a.chooseImagesCancel=function(){a.setState({chooseImageUrl:""}),a.props.chooseImagesCancel()},a.chooseImagesConfirm=function(){a.setState({chooseImageUrl:""}),a.props.chooseImagesConfirm(a.state.chooseImageUrl)},a.state={imageList:[],chooseImageUrl:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getImagesList()}},{key:"render",value:function(){var e=this,t=this.state.imageList;return o.createElement(p.a,{title:"Basic Modal",visible:this.props.chooseImagesVisible,onOk:this.chooseImagesConfirm,onCancel:this.chooseImagesCancel},t.map(function(t,a){return o.createElement(K,{key:a,data:t,chooseImageUrl:e.state.chooseImageUrl,chooseImage:function(){e.chooseImage(t)}})}),o.createElement(W,{getImagesList:this.getImagesList}))}}]),t}(o.Component),q=(a(351),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={chooseImagesVisible:!1,editName:"",imageUrl:""},a.editNameOnChange=function(e){a.setState({editName:e})},a.chooseImagesConfirm=function(e){a.setState({imageUrl:e,chooseImagesVisible:!1})},a.chooseImagesCancel=function(){a.setState({chooseImagesVisible:!1})},a.openChooseImagesModal=function(){a.setState({chooseImagesVisible:!0})},a.editModalConfirm=function(){a.props.editModalConfirm(a.state.editName,a.state.imageUrl),a.setState({editName:"",imageUrl:""})},a.editModalCancel=function(){a.setState({editName:"",imageUrl:""}),a.props.editModalCancel()},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("div",null,o.createElement(p.a,{title:"Basic Modal",visible:this.props.editModalVisible,onOk:this.editModalConfirm,onCancel:this.editModalCancel},o.createElement("div",{className:"edit-modal"},o.createElement(C.a,null,o.createElement(N.a,{span:6},"\u540d\u79f0:"),o.createElement(N.a,{span:6},o.createElement(b.a,{value:this.state.editName,onChange:function(t){return e.editNameOnChange(t.target.value)}}))),o.createElement(C.a,null,o.createElement(N.a,{span:6},"\u56fe\u7247:"),o.createElement(N.a,{span:6},o.createElement("div",{className:"image-content"},""===this.state.imageUrl?o.createElement("div",{className:"image-box",onClick:this.openChooseImagesModal},"+"):o.createElement("div",{className:"image-box"},o.createElement("img",{className:"box-image",src:this.state.imageUrl,onClick:this.openChooseImagesModal}))))))),o.createElement(X,{chooseImagesVisible:this.state.chooseImagesVisible,chooseImagesConfirm:function(t){return e.chooseImagesConfirm(t)},chooseImagesCancel:this.chooseImagesCancel}))}}]),t}(o.Component)),Y=p.a.confirm,z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).numberOnChange=function(e){a.setState({number:e.target.value})},a.searchNameOnChange=function(e){a.setState({searchName:e.target.value})},a.showDeleteConfirm=function(e){Y({title:"Are you sure delete this task?",content:"Some descriptions",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.props.deleteItem(e)},onCancel:function(){}})},a.handleOk=function(){a.props.editItem(a.state.editId,a.state.changeName,a.state.imageUrl),a.handleCancel()},a.handleCancel=function(){a.setState({visible:!1,changeName:""})},a.showEditModal=function(e){a.setState({visible:!0,editId:e.id,changeName:e.task,imageUrl:e.image})},a.changeNameOnChange=function(e){a.setState({changeName:e.target.value})},a.chooseImagesConfirm=function(e){a.props.editItem(a.state.editId,a.state.changeName,e),a.setState({chooseImagesVisible:!1})},a.chooseImagesCancel=function(){a.setState({chooseImagesVisible:!1})},a.openUploadModal=function(e){a.setState({editId:e.id,changeName:e.task,imageUrl:e.image,chooseImagesVisible:!0})},a.editModalConfirm=function(e,t){a.props.addTask(e,t),a.setState({editModalVisible:!1})},a.editModalCancel=function(){a.setState({editModalVisible:!1})},a.openEditModal=function(){a.setState({editModalVisible:!0})},a.state={number:0,searchName:"",visible:!1,editId:0,changeName:"",imageUrl:"",chooseImagesVisible:!1,editModalVisible:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getTask("")}},{key:"render",value:function(){var e=this,t=this.props.global,a=[{title:"id",dataIndex:"id",key:"id"},{title:"\u540d\u79f0",dataIndex:"task",key:"task"},{title:"\u56fe\u7247",render:function(e,t){return o.createElement("div",{className:"image-operation"},o.createElement("img",{className:"image-preview",src:t.image}))}},{title:"\u64cd\u4f5c",render:function(t,a){return o.createElement("div",{className:"config-operation"},o.createElement("span",{onClick:function(){return e.showEditModal(a)}},"\u7f16\u8f91"),o.createElement("span",{onClick:function(){return e.openUploadModal(a)}},"\u9009\u62e9\u56fe\u7247"),o.createElement("span",{onClick:function(){return e.showDeleteConfirm(a.id)}},"\u5220\u9664"))}}];return o.createElement("div",null,o.createElement("div",null,t.amount),o.createElement(v.a,{onClick:this.props.addNumber},"add number"),o.createElement(v.a,{onClick:this.props.reduceNumber},"reduce number"),o.createElement(b.a,{style:{width:"200px"},value:this.state.number,onChange:this.numberOnChange}),o.createElement(v.a,{onClick:function(){return e.openEditModal()}},"\u589e\u52a0"),o.createElement("div",null,o.createElement(b.a,{style:{width:"200px"},value:this.state.searchName,onChange:this.searchNameOnChange}),o.createElement(v.a,{onClick:function(){return e.props.getTask(e.state.searchName)}},"\u67e5\u8be2")),o.createElement(E.a,{rowKey:"id",dataSource:t.data,columns:a}),o.createElement(p.a,{title:"Basic Modal",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},o.createElement(C.a,null,o.createElement(N.a,{span:6},"\u540d\u79f0:"),o.createElement(N.a,{span:6},o.createElement(b.a,{value:this.state.changeName,onChange:this.changeNameOnChange})))),o.createElement(X,{chooseImagesVisible:this.state.chooseImagesVisible,chooseImagesConfirm:function(t){return e.chooseImagesConfirm(t)},chooseImagesCancel:this.chooseImagesCancel}),o.createElement(q,{editModalVisible:this.state.editModalVisible,editModalConfirm:function(t,a){return e.editModalConfirm(t,a)},editModalCancel:this.editModalCancel}))}}]),t}(o.Component),F=Object(f.b)(function(e){return{global:e.global}},n)(z),H=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).loginUserNameOnChange=function(e){a.setState({loginUserName:e.target.value})},a.loginPasswordOnChange=function(e){a.setState({loginPassword:e.target.value})},a.login=function(){var e={username:a.state.loginUserName,password:a.state.loginPassword};S.loginPost("/test/login",e).then(function(e){if(0===e.status){var t=a.props.history;!function(e,t,a){var n=new Date;n.setDate(n.getDate()+a),document.cookie="".concat(e,"=").concat(escape(t)).concat(null===a?"":";expires=".concat(n.toGMTString()),";path=/")}("TOKEN",e.token),t.push("/")}})},a.toRegister=function(){a.props.history.push("/register")},a.state={loginUserName:"",loginPassword:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.createElement("div",{className:"login-form"},o.createElement("div",null,"\u767b\u5f55:"),o.createElement("div",{className:"login-item"},o.createElement("div",{className:"item-name"},"\u7528\u6237\u540d"),o.createElement(b.a,{className:"item-value",placeholder:"user name",value:this.state.loginUserName,onChange:this.loginUserNameOnChange})),o.createElement("div",{className:"login-item"},o.createElement("div",{className:"item-name"},"\u5bc6\u7801"),o.createElement(b.a,{className:"item-value",placeholder:"password",value:this.state.loginPassword,onChange:this.loginPasswordOnChange})),o.createElement(v.a,{type:"primary",onClick:this.login},"\u767b\u5f55"),o.createElement("a",{style:{marginLeft:"10px"},onClick:this.toRegister},"\u6ca1\u6709\u8d26\u53f7?\u6ce8\u518c"))}}]),t}(o.Component),Q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).userNameOnChange=function(e){a.setState({userName:e.target.value})},a.passwordOnChange=function(e){a.setState({password:e.target.value})},a.register=function(){var e={username:a.state.userName,password:a.state.password};S.post("/test/register",e).then(function(e){j.a.success("\u6ce8\u518c\u6210\u529f"),a.setState({userName:"",password:""})})},a.toLogin=function(){a.props.history.push("/login")},a.state={userName:"",password:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.createElement("div",{className:"login-form"},o.createElement("div",null,"\u6ce8\u518c:"),o.createElement("div",{className:"login-item"},o.createElement("div",{className:"item-name"},"\u7528\u6237\u540d"),o.createElement(b.a,{className:"item-value",placeholder:"user name",value:this.state.userName,onChange:this.userNameOnChange})),o.createElement("div",{className:"login-item"},o.createElement("div",{className:"item-name"},"\u5bc6\u7801"),o.createElement(b.a,{className:"item-value",placeholder:"password",value:this.state.password,onChange:this.passwordOnChange})),o.createElement(v.a,{type:"primary",onClick:this.register},"\u6ce8\u518c"),o.createElement("a",{style:{marginLeft:"10px"},onClick:this.toLogin},"\u5df2\u6709\u8d26\u53f7?\u767b\u5f55"))}}]),t}(o.Component),Z=(a(406),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).requireAuth=function(e,t){return U("TOKEN")?o.createElement(e,t):o.createElement(h.a,{to:"/login"})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(g.a,null,o.createElement(h.d,null,o.createElement(h.b,{path:"/",exact:!0,component:function(t){return e.requireAuth(F,t)}}),o.createElement(h.b,{path:"/login",exact:!0,component:H}),o.createElement(h.b,{path:"/register",exact:!0,component:Q})))}}]),t}(o.Component)),$=a(58),ee=a(196),te=a(74),ae={amount:0,data:[]};var ne=window&&window.REDUX_DEVTOOLS_EXTENSION_COMPOSE||$.d,oe=Object($.c)({global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case O:return Object(te.a)({},e,{amount:e.amount+1});case I:return Object(te.a)({},e,{amount:e.amount-1});case k:return Object(te.a)({},e,{data:n});default:return Object(te.a)({},e)}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=Object($.e)(oe,ne(Object($.a)(ee.a)));c.a.render(i.a.createElement(f.a,{store:ie},i.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[199,1,2]]]);
//# sourceMappingURL=main.e3f3fcbc.chunk.js.map